"use strict";(self["webpackChunkvue_admin_hugo"]=self["webpackChunkvue_admin_hugo"]||[]).push([[132],{9132:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout"},[e("Aside"),e("div",{staticClass:"container home"},[e("TopHeader"),[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"name",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{"data-sha":a.row.sha}},[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"edit-btn",attrs:{href:`/#/edit?name=${a.row.name}&sha=${a.row.sha}`}},[t._v("修改")])]}}])})],1)],e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)],1)},i=[],n=a(4025),o=a(8017),l=a(6154),r={name:"HomeView",components:{Aside:n.Z,TopHeader:o.Z},data(){return{loading:!0,githubrepo:"",tableData:[],currentPage:1,pageSize:10,totalItems:0}},methods:{async loadData(){const t=JSON.parse(localStorage.getItem("allData"));if(t){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;this.tableData=t.slice(e,a),this.loading=!1,this.totalItems=t.length}else l.Z.get("https://api.github.com/repos/"+this.githubrepo+"/contents/content/blog").then((t=>{const e=t.data.slice().reverse();localStorage.setItem("allData",JSON.stringify(e));const a=(this.currentPage-1)*this.pageSize,s=a+this.pageSize;this.tableData=e.slice(a,s),this.loading=!1,this.totalItems=e.length})).catch((t=>{console.error(t)}))},handleSizeChange(t){this.pageSize=t,this.loadData()},handleCurrentChange(t){this.currentPage=t,this.loadData()}},mounted(){this.githubrepo=localStorage.getItem("githubRepoHugoToken");const t=JSON.parse(localStorage.getItem("BasicData"));t||l.Z.get("https://api.github.com/repos/"+this.githubrepo).then((t=>{localStorage.setItem("BasicData",JSON.stringify(t.data))})).catch((t=>{console.error(t)})),this.loadData()}},h=r,g=a(1001),c=(0,g.Z)(h,s,i,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=132.938f0f51.js.map