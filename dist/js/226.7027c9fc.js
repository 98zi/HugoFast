"use strict";(self["webpackChunkvue_admin_hugo"]=self["webpackChunkvue_admin_hugo"]||[]).push([[226],{6226:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout"},[e("Aside"),e("div",{staticClass:"container home"},[e("TopHeader"),[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"name",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"edit-btn",attrs:{href:`/edit?name=${a.row.name}`}},[t._v("修改")])]}}])})],1)],e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)],1)},s=[],o=a(4025),i=a(5180),l=a(6154),r={name:"HomeView",components:{Aside:o.Z,TopHeader:i.Z},data(){return{loading:!0,githubrepo:"",tableData:[],currentPage:1,pageSize:10,totalItems:0}},methods:{async loadData(){const t=JSON.parse(localStorage.getItem("tableData"));t?(this.tableData=t,this.loading=!1):l.Z.get("https://api.github.com/repos/"+this.githubrepo+"/contents/content/blog").then((t=>{const e=t.data.slice().reverse(),a=(this.currentPage-1)*this.pageSize,n=a+this.pageSize;this.tableData=e.slice(a,n),this.loading=!1,this.totalItems=e.length,localStorage.setItem("tableData",JSON.stringify(this.tableData))})).catch((t=>{console.error(t)}))},handleSizeChange(t){this.pageSize=t,this.loadData()},handleCurrentChange(t){this.currentPage=t,this.loadData(),window.scrollTo()}},mounted(){this.githubrepo=localStorage.getItem("githubRepoHugoToken");const t=JSON.parse(localStorage.getItem("BasicData"));t||l.Z.get("https://api.github.com/repos/"+this.githubrepo).then((t=>{localStorage.setItem("BasicData",JSON.stringify(t.data))})).catch((t=>{console.error(t)})),this.loadData()}},h=r,c=a(1001),g=(0,c.Z)(h,n,s,!1,null,null,null),u=g.exports}}]);
//# sourceMappingURL=226.7027c9fc.js.map